<!DOCTYPE html>
<html lang="en" class="font-sans">
<head>
    <meta charset="UTF-8">
    <title>Winduum UI</title>
    <meta name="viewport" content="width=device-width, user-scalable=0, initial-scale=1, viewport-fit=cover"/>
    <link rel="stylesheet" href="/src/main.css">
    <link rel="stylesheet" href="/src/tailwind.css">
</head>
<body class="bg-blue-100/10 dark:bg-dark dark:text-light p-md flex flex-col items-start gap-4 min-h-[200vh]">
    <button class="ui-btn" id="dialogShow">Open dialog</button>
    <button class="ui-btn" id="dialogShowInline">Open dialog</button>
    <input autofocus>

    <dialog class="lib-dialog" id="customDialog">
        <div class="c-dialog">
            <input autofocus>
            <button class="ui-btn" id="dialogHideInline">Close dialog</button>
            <button class="ui-btn" id="dialogInDialog">Open dialog In</button>
        </div>
    </dialog>
    <script type="module">
        import { showDialog, closeDialog, insertDialog } from '/src/libraries/dialog.js'
        import { showRipple } from '/src/libraries/Ripple.js'

        document.querySelector('#dialogShow').addEventListener('click', async ({ currentTarget, pageX, pageY }) => {
            showRipple({ currentTarget, pageX, pageY })
            await insertDialog(`
                <div class="c-dialog">
                    <input autofocus>
                    <button class="ui-btn" id="dialogHide">Close dialog</button>
                    <button class="ui-btn" id="dialogInDialog">Open dialog In</button>
                </div>
            `)
        })

        document.querySelector('#dialogShowInline').addEventListener('click', async () => {
            await showDialog(document.querySelector('#customDialog'))
        })

        document.addEventListener('click', async ({ target }) => {
            if (target.id === 'dialogHide' || target.id === 'dialogHideNext') {
                await closeDialog(target.closest('dialog'), { remove: true })
            }

            if (target.id === 'dialogHideInline') {
                await closeDialog(document.querySelector('#customDialog'))
            }

            if (target.id === 'dialogInDialog') {
                await insertDialog(`
                   <div class="c-dialog">
                        <input autofocus value="asd">
                        <button class="ui-btn" id="dialogHideNext">Close dialog</button>
                    </div>
                `, { append: true })
            }
        })
    </script>
</body>
</html>
