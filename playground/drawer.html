<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Winduum UI</title>
    <meta name="viewport" content="width=device-width, user-scalable=0, initial-scale=1, viewport-fit=cover"/>
    <link rel="stylesheet" href="/src/test.css">
</head>
<body class="p-4xl flex flex-col items-start gap-4">
    <dialog class="x-drawer" id="drawerLeft">
        <nav class="x-drawer-content">
            Left
            <button class="x-button muted square" id="drawerCloseLeft">x</button>
        </nav>
    </dialog>

    <dialog class="x-drawer after:-order-last backdrop:hidden" id="drawerRight">
        <div class="x-drawer-content">
            Right
            <button class="x-button muted square" id="drawerClose" autofocus>x</button>
        </div>
    </dialog>

    <dialog class="x-drawer flex flex-col after:-order-last" id="drawerBottom">
        <div class="x-drawer-content" style="--drawer-content-width: 100%;--drawer-content-height: calc(100vh - 4rem);">
            Bottom
        </div>
    </dialog>

    <dialog class="x-drawer flex flex-col" id="drawerTop">
        <div class="x-drawer-content" style="--drawer-content-width: 100%;--drawer-content-height: calc(100vh - 4rem);">
            Top
        </div>
    </dialog>

    <button class="x-button" id="openDrawerLeft">Open left drawer</button>
    <button class="x-button" id="openDrawerRight">Open right drawer</button>
    <button class="x-button" id="openDrawerBottom">Open bottom drawer</button>
    <button class="x-button" id="openDrawerTop">Open top drawer</button>

    <script type="module">
        import { showDrawer, closeDrawer, scrollDrawer } from "/src/components/drawer/index.js";

        drawerLeft?.addEventListener('scroll', ({ target }) => scrollDrawer(target))

        openDrawerLeft?.addEventListener('click', () => {
            showDrawer(drawerLeft)
        })

        drawerCloseLeft?.addEventListener('click', () => {
            closeDrawer(drawerLeft, drawerLeft.scrollWidth)
        })

        drawerRight?.addEventListener('scroll', ({ target }) => scrollDrawer(target, {
            opacityRatio: 0,
            scrollOpen: target.scrollWidth - target.clientWidth,
            scrollClose: 0
        }))

        openDrawerRight?.addEventListener('click', () => {
            showDrawer(drawerRight, () => [drawerRight.scrollWidth, 0])
        })

        drawerClose?.addEventListener('click', () => {
            closeDrawer(drawerLeft, drawerLeft.scrollWidth)
        })

        drawerBottom.addEventListener('scroll', ({ target }) => scrollDrawer(target, {
            opacityRatio: 0,
            scrollOpen: target.scrollHeight - target.clientHeight,
            scrollClose: 0,
            scrollDirection: target.scrollTop,
            snapClass: 'snap-y snap-mandatory',
            scrollSize: target.scrollHeight - target.clientHeight
        }))

        openDrawerBottom?.addEventListener('click', () => {
            showDrawer(drawerBottom, () => [drawerBottom.scrollHeight, 0], 'top')
        })

        drawerTop?.addEventListener('scroll', ({ target }) => scrollDrawer(target, {
            snapClass: 'snap-y snap-mandatory',
            scrollSize: target.scrollHeight - target.clientHeight,
            scrollDirection: target.scrollTop,
            scrollOpen: 0,
            scrollClose: target.scrollHeight - target.clientHeight
        }))

        openDrawerTop?.addEventListener('click', () => {
            showDrawer(drawerTop, () => [0, drawerTop?.scrollHeight], 'top')
        })
    </script>

    <svg class="hidden">
        <symbol id="icon-exclamation-circle" class="ms-auto text-error" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
        </symbol>
    </svg>
</body>
</html>
